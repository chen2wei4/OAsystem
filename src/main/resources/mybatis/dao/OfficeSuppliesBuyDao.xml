<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 办公用品请购 -->
<mapper namespace="com.woniuxy.oasystem.dao.OfficeSuppliesBuyDao">
	<!-- 分页查询 -->
	<select id="findAllByPage" resultType="OfficeSuppliesBuy">
		select * from office_supplies_buy where flag = 1
		<include refid="conditionSql"/>
		limit #{pageIndex},#{pageSize}
	</select>
	<!-- 总条数-->
	<select id="findAllByPageCount" resultType="int">
		select count(*) from office_supplies_buy 
		where flag = 1
		<include refid="conditionSql"/>
	</select>
	<!-- 模糊查询条件 -->
	<sql id="conditionSql">
			<if test="osb.empId!= null and osb.empId!=''">
				and emp_id like concat('%',#{osb.empId},'%')
			</if>
			<if test="osb.buyTime!= null and osb.buyTime!=''">
				and buy_time like '%' #{osb.buyTime} '%'
			</if>
			<if test="osb.state!= null and osb.state!=''">
				and state like '%' #{osb.state} '%'
			</if>
	</sql>
	<!-- 根据osbid删除 -->
	<update id="deleteByOsbId">
		update office_supplies_buy set flag = 0 where osb_id = #{osbId}
	</update>
	<!-- 根据osbid修改 -->
	<update id="updateByOsbId">
		update office_supplies_buy set 
		emp_id=#{osb.empId},content=#{osb.content},buy_time=#{osb.buyTime},state=#{osb.state}
		where osb_id = #{osb.osbId}
	</update>
	<!-- 添加 -->
	<insert id="insert">
		insert into office_supplies_buy (emp_id,content,buy_time,state) 
		values (#{osb.empId},#{osb.content},#{osb.buyTime},#{osb.state})
	</insert>
</mapper>