<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 办公用品归还 -->
<mapper namespace="com.woniuxy.oasystem.dao.OfficeSuppliesReturnDao">
	<!-- 分页查询 -->
	<select id="findAllByPage" resultType="OfficeSuppliesReturn">
		select * from office_supplies_return where flag = 1
		<include refid="conditionSql"/>
		limit #{pageIndex},#{pageSize}
	</select>
	<!-- 总条数-->
	<select id="findAllByPageCount" resultType="int">
		select count(*) from office_supplies_return 
		where flag = 1
		<include refid="conditionSql"/>
	</select>
	<!-- 模糊查询条件 -->
	<sql id="conditionSql">
			<if test="osr.osNumber!= null and osr.osNumber!=''">
				and os_number like concat('%',#{osr.osNumber},'%')
			</if>
			<if test="osr.empId!= null and osr.empId!=''">
				and emp_id like concat('%',#{osr.empId},'%')
				
			</if>
			<if test="osr.returnTime!= null and osr.returnTime!=''">
				and return_time like '%' #{osr.returnTime} '%'
			</if>
			
	</sql>
	<!-- 根据osrid删除 -->
	<update id="deleteByOsrId">
		update office_supplies_return set flag = 0 where osr_id = #{osrId}
	</update>
	<!-- 根据osrid修改 -->
	<update id="updateByOsrId">
		update office_supplies_return set 
		os_number=#{osr.osNumber},emp_id=#{osr.empId},return_time=#{osr.returnTime},
		maintenance=#{osr.maintenance}
		where osr_id = #{osr.osrId}
	</update>
	<!-- 添加 -->
	<insert id="insert">
		insert into office_supplies_return (os_number,emp_id,return_time,maintenance) 
		values (#{osr.osNumber},#{osr.empId},#{osr.returnTime},#{osr.maintenance})
	</insert>
</mapper>