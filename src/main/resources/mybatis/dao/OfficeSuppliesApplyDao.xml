<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 办公用品申请管理 -->
<mapper namespace="com.woniuxy.oasystem.dao.OfficeSuppliesApplyDao">
	<!-- 分页查询 -->
	<select id="findAllByPage" resultType="OfficeSuppliesApply">
		select * from office_supplies_apply where flag = 1
		<include refid="conditionSql"/>
		limit #{pageIndex},#{pageSize}
	</select>
	<!-- 总条数-->
	<select id="findAllByPageCount" resultType="int">
		select count(*) from office_supplies_apply 
		where flag = 1
		<include refid="conditionSql"/>
	</select>
	<!-- 模糊查询条件 -->
	<sql id="conditionSql">
			<if test="osa.osNumber!= null and osa.osNumber!=''">
				and os_number like concat('%',#{osa.osNumber},'%')
				
			</if>
			<if test="osa.empId!= null and osa.empId!=''">
				and emp_id like concat('%',#{osa.empId},'%')
			</if>
			<if test="osa.applyTime!= null and osa.applyTime!=''">
				and apply_time like '%' #{osa.applyTime} '%'
			</if>
			<if test="osa.review!= null and osa.review!=''">
				and review like '%' #{osa.review} '%'
			</if>
	</sql>
	<!-- 根据osaid删除 -->
	<update id="deleteByOsaId">
		update office_supplies_apply set flag = 0 where osa_id = #{osaId}
	</update>
	<!-- 根据osaid修改 -->
	<update id="updateByOsaId">
		update office_supplies_apply set 
		os_number=#{osa.osNumber},emp_id=#{osa.empId},apply_time=#{osa.applyTime},
		number=#{osa.number},review=#{osa.review}
		where osa_id = #{osa.osaId}
	</update>
	<!-- 添加 -->
	<insert id="insert">
		insert into office_supplies_apply (os_number,emp_id,apply_time,number,review) 
		values (#{osa.osNumber},#{osa.empId},#{osa.applyTime},#{osa.number},#{osa.review})
	</insert>
</mapper>